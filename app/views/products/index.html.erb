<%= stylesheet_link_tag "index.css" %>
<div class="header">
    <h1>TECNO LOVERS</h1>
</div>

<div class="product-cards">
  <% categories = ['Smartphones', 'Televisions', 'Computers', 'Game consoles', 'Cameras', 'Smart watches', 'Speakers', 'Drones', 'Headphones'] %>
  <% images = ['Smartphone.png', 'Television.png', 'Computer.png', 'GameConsole.png', 'Camera.png', 'SmartWatch.png', 'Speaker.png', 'Drone.png', 'Headphone.png'] %>

  <% categories.each_with_index do |category, index| %>
    <% img = images[index] %>
    <div class="product-card">
      <div class="product-details">
        <h2><%= category %></h2>
        <%= link_to category_path(category), class: "product-link" do %>
          <%= image_tag img, alt: "#{category} image", class: "product-image" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>



<h2>Items in Cart:</h2>
<% if @cart.present? %>
  <% @cart.cart_items.each do |cart_item| %>
    <p><%= cart_item.product.name %> - Quantity: <%= cart_item.quantity %></p>
  <% end %>
<% else %>
  <p>Your cart is empty.</p>
<% end %>

<div class="product-cards">
  <% @products.each do |product| %>
    <div class="product-card">
      <% if product.image_url.present? %>
        <%= image_tag product.image_url, alt: "#{product.name} image", class: "product-image" %>
      <% else %>
        <div class="no-image">No image available</div>
      <% end %>
      <div class="product-details">
        <h2><%= product.name %></h2>
        <p><%= product.description %></p>
        <p class="price">Price: <%= product.price %></p>

        <% product_categories = ProductCategory.where(product_id: product.id) %>
        <% if product_categories.any? %>
          <p>Categories:</p>
          <ul>
            <% product_categories.each do |product_category| %>
              <li><%= product_category.category.name %></li>
            <% end %>
          </ul>
        <% else %>
          <p>Categories: N/A</p>
        <% end %>

<%= button_to 'Add to Cart', add_item_cart_path(product_id: product.id), method: :post %>

      </div>
    </div>
  <% end %>
</div>

